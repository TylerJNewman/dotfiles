#!/usr/bin/env zsh
# Minimal macOS zshrc

export DOTFILES="$HOME/dotfiles"
export ZSH_CUSTOM_DIR="$DOTFILES/zsh"
CDPATH=.:$HOME:$HOME/projects:$HOME/code

# Load core configurations in order of dependency
source "$ZSH_CUSTOM_DIR/configs/path.zsh"
typeset -U PATH

# Set default editor
export EDITOR='cursor'
export VISUAL='cursor'

# Load configuration files in specific order
source "$ZSH_CUSTOM_DIR/configs/history.zsh"
source "$ZSH_CUSTOM_DIR/configs/options.zsh"
source "$ZSH_CUSTOM_DIR/configs/completion.zsh"
source "$ZSH_CUSTOM_DIR/prompt.zsh"
source "$ZSH_CUSTOM_DIR/configs/plugins.zsh"
source "$ZSH_CUSTOM_DIR/aliases.zsh"
source "$ZSH_CUSTOM_DIR/functions.zsh"
source "$ZSH_CUSTOM_DIR/configs/lazy-load.zsh"
source "$ZSH_CUSTOM_DIR/configs/macos.zsh"

# Load local configurations
[[ -f "$HOME/.zshrc.local" ]] && source "$HOME/.zshrc.local"
[[ -f "$ZSH_CUSTOM_DIR/local.zsh" ]] && source "$ZSH_CUSTOM_DIR/local.zsh"

# Load secrets
if [[ -d "$ZSH_CUSTOM_DIR/secrets" ]]; then
  setopt nullglob
  for secret in "$ZSH_CUSTOM_DIR/secrets"/*.zsh; do
    source "$secret"
  done
  unsetopt nullglob
fi 