#!/usr/bin/env zsh

# Main zshrc file - Minimal and efficient

# Path to dotfiles
export DOTFILES="$HOME/dotfiles"
export ZSH_CUSTOM_DIR="$DOTFILES/zsh"

# Set up CDPATH for easier navigation
CDPATH=.:$HOME:$HOME/projects:$HOME/code:$HOME/Desktop

# Load PATH configuration early
source "$ZSH_CUSTOM_DIR/configs/path.zsh"

# Set default editor
if command -v cursor &> /dev/null; then
  export EDITOR='cursor'
  export VISUAL='cursor'
elif command -v code &> /dev/null; then
  export EDITOR='code --wait'
  export VISUAL='code --wait'
else
  export EDITOR='vim'
  export VISUAL='vim'
fi

# Set ripgrep config file
export RIPGREP_CONFIG_PATH="$DOTFILES/config/ripgrep/ripgreprc"

# History configuration
HISTFILE="$HOME/.zsh_history"
HISTSIZE=10000
SAVEHIST=10000
setopt HIST_VERIFY
setopt SHARE_HISTORY
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_FIND_NO_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_SAVE_NO_DUPS
setopt HIST_EXPIRE_DUPS_FIRST
setopt HIST_REDUCE_BLANKS

# Load core configuration files in specific order
core_files=(
  "$ZSH_CUSTOM_DIR/prompt.zsh"
  "$ZSH_CUSTOM_DIR/configs/plugins.zsh"
  "$ZSH_CUSTOM_DIR/aliases.zsh"
  "$ZSH_CUSTOM_DIR/functions.zsh"
  "$ZSH_CUSTOM_DIR/configs/lazy-load.zsh"
)

for file in "${core_files[@]}"; do
  [[ -r "$file" ]] && source "$file"
done

# Load local configuration if available
[[ -f "$HOME/.zshrc.local" ]] && source "$HOME/.zshrc.local" 